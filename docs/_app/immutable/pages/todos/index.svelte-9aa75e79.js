import{P as X,S as de,i as ue,s as ce,e as g,k as T,c as b,a as U,m as H,d as w,b as n,$ as ne,g as Y,J as c,a0 as z,a1 as pe,a2 as he,a3 as ve,M as fe,a4 as se,R as me,t as _e,K as ge,h as be,a5 as ke,p as we,q as ye,o as Ee,n as xe,a6 as Ce,E as Me}from"../../chunks/index-163b6a71.js";import{c as A}from"../../chunks/singletons-d1fb5791.js";A.disable_scroll_handling;A.goto;const Te=A.invalidate;A.prefetch;A.prefetch_routes;A.before_navigate;A.after_navigate;function Z(i,{pending:e,error:t,result:a}={}){let p;async function _(v){const l=p={};v.preventDefault();const d=new FormData(i);e&&e({data:d,form:i});try{const h=await fetch(i.action,{method:i.method,headers:{accept:"application/json"},body:d});if(l!==p)return;if(h.ok){a&&a({data:d,form:i,response:h});const o=new URL(i.action);o.search=o.hash="",Te(o.href)}else t?t({data:d,form:i,error:null,response:h}):console.error(await h.text())}catch(h){if(t&&h instanceof Error)t({data:d,form:i,error:h,response:null});else throw h}}return i.addEventListener("submit",_),{destroy(){i.removeEventListener("submit",_)}}}function ie(i){const e=i-1;return e*e*e+1}function oe(i,{delay:e=0,duration:t=400,easing:a=ie,start:p=0,opacity:_=0}={}){const v=getComputedStyle(i),l=+v.opacity,d=v.transform==="none"?"":v.transform,h=1-p,o=l*(1-_);return{delay:e,duration:t,easing:a,css:(x,y)=>`
			transform: ${d} scale(${1-h*y});
			opacity: ${l-o*y}
		`}}function He(i,{from:e,to:t},a={}){const p=getComputedStyle(i),_=p.transform==="none"?"":p.transform,[v,l]=p.transformOrigin.split(" ").map(parseFloat),d=e.left+e.width*v/t.width-(t.left+v),h=e.top+e.height*l/t.height-(t.top+l),{delay:o=0,duration:x=C=>Math.sqrt(C)*120,easing:y=ie}=a;return{delay:o,duration:X(x)?x(Math.sqrt(d*d+h*h)):x,easing:y,css:(C,f)=>{const k=f*d,j=f*h,r=C+f*e.width/t.width,s=C+f*e.height/t.height;return`transform: ${_} translate(${k}px, ${j}px) scale(${r}, ${s});`}}}function le(i,e,t){const a=i.slice();return a[3]=e[t],a[4]=e,a[5]=t,a}function re(i,e){let t,a,p,_,v,l,d,h,o,x,y,C,f,k,j,r,s,u,B,N,L,V,O,F,J,P,q,S,K,I,G,Q=Me,M,W,ee;function te(...E){return e[1](e[3],e[4],e[5],...E)}function ae(){return e[2](e[3],e[4],e[5])}return{key:i,first:null,c(){t=g("div"),a=g("form"),p=g("input"),v=T(),l=g("input"),h=T(),o=g("button"),C=T(),f=g("form"),k=g("input"),r=T(),s=g("input"),B=T(),N=g("button"),L=T(),V=g("form"),O=g("input"),J=T(),P=g("button"),K=T(),this.h()},l(E){t=b(E,"DIV",{class:!0});var m=U(t);a=b(m,"FORM",{action:!0,method:!0});var R=U(a);p=b(R,"INPUT",{type:!0,name:!0,class:!0}),v=H(R),l=b(R,"INPUT",{type:!0,name:!0,class:!0}),h=H(R),o=b(R,"BUTTON",{class:!0,"aria-label":!0}),U(o).forEach(w),R.forEach(w),C=H(m),f=b(m,"FORM",{class:!0,action:!0,method:!0});var D=U(f);k=b(D,"INPUT",{type:!0,name:!0,class:!0}),r=H(D),s=b(D,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),B=H(D),N=b(D,"BUTTON",{class:!0,"aria-label":!0}),U(N).forEach(w),D.forEach(w),L=H(m),V=b(m,"FORM",{action:!0,method:!0});var $=U(V);O=b($,"INPUT",{type:!0,name:!0,class:!0}),J=H($),P=b($,"BUTTON",{class:!0,"aria-label":!0}),U(P).forEach(w),$.forEach(w),K=H(m),m.forEach(w),this.h()},h(){n(p,"type","hidden"),n(p,"name","uid"),p.value=_=e[3].uid,n(p,"class","svelte-16nsat"),n(l,"type","hidden"),n(l,"name","done"),l.value=d=e[3].done?"":"true",n(l,"class","svelte-16nsat"),n(o,"class","toggle svelte-16nsat"),n(o,"aria-label",x="Mark todo as "+(e[3].done?"not done":"done")),n(a,"action","/todos?_method=PATCH"),n(a,"method","post"),n(k,"type","hidden"),n(k,"name","uid"),k.value=j=e[3].uid,n(k,"class","svelte-16nsat"),n(s,"aria-label","Edit todo"),n(s,"type","text"),n(s,"name","text"),s.value=u=e[3].text,n(s,"class","svelte-16nsat"),n(N,"class","save svelte-16nsat"),n(N,"aria-label","Save todo"),n(f,"class","text svelte-16nsat"),n(f,"action","/todos?_method=PATCH"),n(f,"method","post"),n(O,"type","hidden"),n(O,"name","uid"),O.value=F=e[3].uid,n(O,"class","svelte-16nsat"),n(P,"class","delete svelte-16nsat"),n(P,"aria-label","Delete todo"),P.disabled=q=e[3].pending_delete,n(V,"action","/todos?_method=DELETE"),n(V,"method","post"),n(t,"class","todo svelte-16nsat"),ne(t,"done",e[3].done),this.first=t},m(E,m){Y(E,t,m),c(t,a),c(a,p),c(a,v),c(a,l),c(a,h),c(a,o),c(t,C),c(t,f),c(f,k),c(f,r),c(f,s),c(f,B),c(f,N),c(t,L),c(t,V),c(V,O),c(V,J),c(V,P),c(t,K),M=!0,W||(ee=[z(y=Z.call(null,a,{pending:te})),z(Z.call(null,f)),z(S=Z.call(null,V,{pending:ae}))],W=!0)},p(E,m){e=E,(!M||m&1&&_!==(_=e[3].uid))&&(p.value=_),(!M||m&1&&d!==(d=e[3].done?"":"true"))&&(l.value=d),(!M||m&1&&x!==(x="Mark todo as "+(e[3].done?"not done":"done")))&&n(o,"aria-label",x),y&&X(y.update)&&m&1&&y.update.call(null,{pending:te}),(!M||m&1&&j!==(j=e[3].uid))&&(k.value=j),(!M||m&1&&u!==(u=e[3].text)&&s.value!==u)&&(s.value=u),(!M||m&1&&F!==(F=e[3].uid))&&(O.value=F),(!M||m&1&&q!==(q=e[3].pending_delete))&&(P.disabled=q),S&&X(S.update)&&m&1&&S.update.call(null,{pending:ae}),m&1&&ne(t,"done",e[3].done)},r(){G=t.getBoundingClientRect()},f(){pe(t),Q(),he(t,G)},a(){Q(),Q=ve(t,G,He,{duration:200})},i(E){M||(E&&fe(()=>{I||(I=se(t,oe,{start:.7},!0)),I.run(1)}),M=!0)},o(E){E&&(I||(I=se(t,oe,{start:.7},!1)),I.run(0)),M=!1},d(E){E&&w(t),E&&I&&I.end(),W=!1,me(ee)}}}function Ve(i){let e,t,a,p,_,v,l,d,h,o=[],x=new Map,y,C,f,k=i[0];const j=r=>r[3].uid;for(let r=0;r<k.length;r+=1){let s=le(i,k,r),u=j(s);x.set(u,o[r]=re(u,s))}return{c(){e=g("meta"),t=T(),a=g("div"),p=g("h1"),_=_e("Todos"),v=T(),l=g("form"),d=g("input"),h=T();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){const s=ge('[data-svelte="svelte-aw2gey"]',document.head);e=b(s,"META",{name:!0,content:!0}),s.forEach(w),t=H(r),a=b(r,"DIV",{class:!0});var u=U(a);p=b(u,"H1",{});var B=U(p);_=be(B,"Todos"),B.forEach(w),v=H(u),l=b(u,"FORM",{class:!0,action:!0,method:!0});var N=U(l);d=b(N,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),N.forEach(w),h=H(u);for(let L=0;L<o.length;L+=1)o[L].l(u);u.forEach(w),this.h()},h(){document.title="Todos",n(e,"name","description"),n(e,"content","A todo list app"),n(d,"name","text"),n(d,"aria-label","Add todo"),n(d,"placeholder","+ tap to add a todo"),n(d,"class","svelte-16nsat"),n(l,"class","new svelte-16nsat"),n(l,"action","/todos"),n(l,"method","post"),n(a,"class","todos svelte-16nsat")},m(r,s){c(document.head,e),Y(r,t,s),Y(r,a,s),c(a,p),c(p,_),c(a,v),c(a,l),c(l,d),c(a,h);for(let u=0;u<o.length;u+=1)o[u].m(a,null);y=!0,C||(f=z(Z.call(null,l,{result:Ue})),C=!0)},p(r,[s]){if(s&1){k=r[0],xe();for(let u=0;u<o.length;u+=1)o[u].r();o=ke(o,s,j,1,r,k,x,a,Ce,re,null,le);for(let u=0;u<o.length;u+=1)o[u].a();we()}},i(r){if(!y){for(let s=0;s<k.length;s+=1)ye(o[s]);y=!0}},o(r){for(let s=0;s<o.length;s+=1)Ee(o[s]);y=!1},d(r){w(e),r&&w(t),r&&w(a);for(let s=0;s<o.length;s+=1)o[s].d();C=!1,f()}}}const Ue=async({form:i})=>{i.reset()};function je(i,e,t){let{todos:a}=e;const p=(v,l,d,{data:h})=>{t(0,l[d].done=!!h.get("done"),a)},_=(v,l,d)=>t(0,l[d].pending_delete=!0,a);return i.$$set=v=>{"todos"in v&&t(0,a=v.todos)},[a,p,_]}class Pe extends de{constructor(e){super(),ue(this,e,je,Ve,ce,{todos:0})}}export{Pe as default};
