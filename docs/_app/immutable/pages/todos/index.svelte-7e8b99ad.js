import{Q as Y,S as ue,i as ce,s as pe,e as _,k as M,c as $,a as V,m as T,d as k,b as n,a0 as se,g as ee,J as c,a1 as z,a2 as he,a3 as ve,a4 as fe,N as me,a5 as oe,T as ge,t as _e,K as $e,h as be,a6 as ke,p as we,q as ye,o as Ee,L as xe,n as Ce,a7 as Me,E as Te}from"../../chunks/index-ec36cf97.js";import{c as P}from"../../chunks/singletons-d1fb5791.js";P.disable_scroll_handling;P.goto;const He=P.invalidate;P.prefetch;P.prefetch_routes;P.before_navigate;P.after_navigate;function Z(i,{pending:e,error:t,result:a}={}){let p;async function g(v){const l=p={};v.preventDefault();const d=new FormData(i);e&&e({data:d,form:i});try{const h=await fetch(i.action,{method:i.method,headers:{accept:"application/json"},body:d});if(l!==p)return;if(h.ok){a&&a({data:d,form:i,response:h});const o=new URL(i.action);o.search=o.hash="",He(o.href)}else t?t({data:d,form:i,error:null,response:h}):console.error(await h.text())}catch(h){if(t&&h instanceof Error)t({data:d,form:i,error:h,response:null});else throw h}}return i.addEventListener("submit",g),{destroy(){i.removeEventListener("submit",g)}}}function de(i){const e=i-1;return e*e*e+1}function le(i,{delay:e=0,duration:t=400,easing:a=de,start:p=0,opacity:g=0}={}){const v=getComputedStyle(i),l=+v.opacity,d=v.transform==="none"?"":v.transform,h=1-p,o=l*(1-g);return{delay:e,duration:t,easing:a,css:(E,w)=>`
			transform: ${d} scale(${1-h*w});
			opacity: ${l-o*w}
		`}}function Ve(i,{from:e,to:t},a={}){const p=getComputedStyle(i),g=p.transform==="none"?"":p.transform,[v,l]=p.transformOrigin.split(" ").map(parseFloat),d=e.left+e.width*v/t.width-(t.left+v),h=e.top+e.height*l/t.height-(t.top+l),{delay:o=0,duration:E=x=>Math.sqrt(x)*120,easing:w=de}=a;return{delay:o,duration:Y(E)?E(Math.sqrt(d*d+h*h)):E,easing:w,css:(x,f)=>{const b=f*d,N=f*h,r=x+f*e.width/t.width,s=x+f*e.height/t.height;return`transform: ${g} translate(${b}px, ${N}px) scale(${r}, ${s});`}}}const{Map:Ne,document:X}=xe;function re(i,e,t){const a=i.slice();return a[3]=e[t],a[4]=e,a[5]=t,a}function ie(i,e){let t,a,p,g,v,l,d,h,o,E,w,x,f,b,N,r,s,u,A,U,I,H,j,F,J,L,R,q,K,O,Q,G=Te,C,W,te;function ae(...y){return e[1](e[3],e[4],e[5],...y)}function ne(){return e[2](e[3],e[4],e[5])}return{key:i,first:null,c(){t=_("div"),a=_("form"),p=_("input"),v=M(),l=_("input"),h=M(),o=_("button"),x=M(),f=_("form"),b=_("input"),r=M(),s=_("input"),A=M(),U=_("button"),I=M(),H=_("form"),j=_("input"),J=M(),L=_("button"),K=M(),this.h()},l(y){t=$(y,"DIV",{class:!0});var m=V(t);a=$(m,"FORM",{action:!0,method:!0});var B=V(a);p=$(B,"INPUT",{type:!0,name:!0,class:!0}),v=T(B),l=$(B,"INPUT",{type:!0,name:!0,class:!0}),h=T(B),o=$(B,"BUTTON",{class:!0,"aria-label":!0}),V(o).forEach(k),B.forEach(k),x=T(m),f=$(m,"FORM",{class:!0,action:!0,method:!0});var D=V(f);b=$(D,"INPUT",{type:!0,name:!0,class:!0}),r=T(D),s=$(D,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),A=T(D),U=$(D,"BUTTON",{class:!0,"aria-label":!0}),V(U).forEach(k),D.forEach(k),I=T(m),H=$(m,"FORM",{action:!0,method:!0});var S=V(H);j=$(S,"INPUT",{type:!0,name:!0,class:!0}),J=T(S),L=$(S,"BUTTON",{class:!0,"aria-label":!0}),V(L).forEach(k),S.forEach(k),K=T(m),m.forEach(k),this.h()},h(){n(p,"type","hidden"),n(p,"name","uid"),p.value=g=e[3].uid,n(p,"class","svelte-16nsat"),n(l,"type","hidden"),n(l,"name","done"),l.value=d=e[3].done?"":"true",n(l,"class","svelte-16nsat"),n(o,"class","toggle svelte-16nsat"),n(o,"aria-label",E="Mark todo as "+(e[3].done?"not done":"done")),n(a,"action","/todos?_method=PATCH"),n(a,"method","post"),n(b,"type","hidden"),n(b,"name","uid"),b.value=N=e[3].uid,n(b,"class","svelte-16nsat"),n(s,"aria-label","Edit todo"),n(s,"type","text"),n(s,"name","text"),s.value=u=e[3].text,n(s,"class","svelte-16nsat"),n(U,"class","save svelte-16nsat"),n(U,"aria-label","Save todo"),n(f,"class","text svelte-16nsat"),n(f,"action","/todos?_method=PATCH"),n(f,"method","post"),n(j,"type","hidden"),n(j,"name","uid"),j.value=F=e[3].uid,n(j,"class","svelte-16nsat"),n(L,"class","delete svelte-16nsat"),n(L,"aria-label","Delete todo"),L.disabled=R=e[3].pending_delete,n(H,"action","/todos?_method=DELETE"),n(H,"method","post"),n(t,"class","todo svelte-16nsat"),se(t,"done",e[3].done),this.first=t},m(y,m){ee(y,t,m),c(t,a),c(a,p),c(a,v),c(a,l),c(a,h),c(a,o),c(t,x),c(t,f),c(f,b),c(f,r),c(f,s),c(f,A),c(f,U),c(t,I),c(t,H),c(H,j),c(H,J),c(H,L),c(t,K),C=!0,W||(te=[z(w=Z.call(null,a,{pending:ae})),z(Z.call(null,f)),z(q=Z.call(null,H,{pending:ne}))],W=!0)},p(y,m){e=y,(!C||m&1&&g!==(g=e[3].uid))&&(p.value=g),(!C||m&1&&d!==(d=e[3].done?"":"true"))&&(l.value=d),(!C||m&1&&E!==(E="Mark todo as "+(e[3].done?"not done":"done")))&&n(o,"aria-label",E),w&&Y(w.update)&&m&1&&w.update.call(null,{pending:ae}),(!C||m&1&&N!==(N=e[3].uid))&&(b.value=N),(!C||m&1&&u!==(u=e[3].text)&&s.value!==u)&&(s.value=u),(!C||m&1&&F!==(F=e[3].uid))&&(j.value=F),(!C||m&1&&R!==(R=e[3].pending_delete))&&(L.disabled=R),q&&Y(q.update)&&m&1&&q.update.call(null,{pending:ne}),m&1&&se(t,"done",e[3].done)},r(){Q=t.getBoundingClientRect()},f(){he(t),G(),ve(t,Q)},a(){G(),G=fe(t,Q,Ve,{duration:200})},i(y){C||(y&&me(()=>{O||(O=oe(t,le,{start:.7},!0)),O.run(1)}),C=!0)},o(y){y&&(O||(O=oe(t,le,{start:.7},!1)),O.run(0)),C=!1},d(y){y&&k(t),y&&O&&O.end(),W=!1,ge(te)}}}function Ue(i){let e,t,a,p,g,v,l,d,h,o=[],E=new Ne,w,x,f,b=i[0];const N=r=>r[3].uid;for(let r=0;r<b.length;r+=1){let s=re(i,b,r),u=N(s);E.set(u,o[r]=ie(u,s))}return{c(){e=_("meta"),t=M(),a=_("div"),p=_("h1"),g=_e("Todos"),v=M(),l=_("form"),d=_("input"),h=M();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){const s=$e('[data-svelte="svelte-aw2gey"]',X.head);e=$(s,"META",{name:!0,content:!0}),s.forEach(k),t=T(r),a=$(r,"DIV",{class:!0});var u=V(a);p=$(u,"H1",{});var A=V(p);g=be(A,"Todos"),A.forEach(k),v=T(u),l=$(u,"FORM",{class:!0,action:!0,method:!0});var U=V(l);d=$(U,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),U.forEach(k),h=T(u);for(let I=0;I<o.length;I+=1)o[I].l(u);u.forEach(k),this.h()},h(){X.title="Todos",n(e,"name","description"),n(e,"content","A todo list app"),n(d,"name","text"),n(d,"aria-label","Add todo"),n(d,"placeholder","+ tap to add a todo"),n(d,"class","svelte-16nsat"),n(l,"class","new svelte-16nsat"),n(l,"action","/todos"),n(l,"method","post"),n(a,"class","todos svelte-16nsat")},m(r,s){c(X.head,e),ee(r,t,s),ee(r,a,s),c(a,p),c(p,g),c(a,v),c(a,l),c(l,d),c(a,h);for(let u=0;u<o.length;u+=1)o[u].m(a,null);w=!0,x||(f=z(Z.call(null,l,{result:je})),x=!0)},p(r,[s]){if(s&1){b=r[0],Ce();for(let u=0;u<o.length;u+=1)o[u].r();o=ke(o,s,N,1,r,b,E,a,Me,ie,null,re);for(let u=0;u<o.length;u+=1)o[u].a();we()}},i(r){if(!w){for(let s=0;s<b.length;s+=1)ye(o[s]);w=!0}},o(r){for(let s=0;s<o.length;s+=1)Ee(o[s]);w=!1},d(r){k(e),r&&k(t),r&&k(a);for(let s=0;s<o.length;s+=1)o[s].d();x=!1,f()}}}const je=async({form:i})=>{i.reset()};function Le(i,e,t){let{todos:a}=e;const p=(v,l,d,{data:h})=>{t(0,l[d].done=!!h.get("done"),a)},g=(v,l,d)=>t(0,l[d].pending_delete=!0,a);return i.$$set=v=>{"todos"in v&&t(0,a=v.todos)},[a,p,g]}class Pe extends ue{constructor(e){super(),ce(this,e,Le,Ue,pe,{todos:0})}}export{Pe as default};
