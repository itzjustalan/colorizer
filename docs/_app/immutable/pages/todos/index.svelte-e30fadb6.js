import{X as G,S as ue,i as ce,s as pe,e as _,k as M,c as $,a as V,m as T,d as k,b as n,J as se,g as ee,K as c,Y as Z,Z as he,_ as ve,$ as fe,a0 as me,a1 as oe,W as ge,t as _e,Q as $e,h as be,a2 as ke,p as we,q as ye,o as Ee,R as xe,n as Ce,a3 as Me,E as Te}from"../../chunks/index-a3104a0f.js";import{c as P}from"../../chunks/singletons-d1fb5791.js";function de(i){const e=i-1;return e*e*e+1}P.disable_scroll_handling;P.goto;const He=P.invalidate;P.prefetch;P.prefetch_routes;P.before_navigate;P.after_navigate;function z(i,{pending:e,error:t,result:a}={}){let p;async function g(v){const l=p={};v.preventDefault();const d=new FormData(i);e&&e({data:d,form:i});try{const h=await fetch(i.action,{method:i.method,headers:{accept:"application/json"},body:d});if(l!==p)return;if(h.ok){a&&a({data:d,form:i,response:h});const o=new URL(i.action);o.search=o.hash="",He(o.href)}else t?t({data:d,form:i,error:null,response:h}):console.error(await h.text())}catch(h){if(t&&h instanceof Error)t({data:d,form:i,error:h,response:null});else throw h}}return i.addEventListener("submit",g),{destroy(){i.removeEventListener("submit",g)}}}function le(i,{delay:e=0,duration:t=400,easing:a=de,start:p=0,opacity:g=0}={}){const v=getComputedStyle(i),l=+v.opacity,d=v.transform==="none"?"":v.transform,h=1-p,o=l*(1-g);return{delay:e,duration:t,easing:a,css:(E,w)=>`
			transform: ${d} scale(${1-h*w});
			opacity: ${l-o*w}
		`}}function Ve(i,{from:e,to:t},a={}){const p=getComputedStyle(i),g=p.transform==="none"?"":p.transform,[v,l]=p.transformOrigin.split(" ").map(parseFloat),d=e.left+e.width*v/t.width-(t.left+v),h=e.top+e.height*l/t.height-(t.top+l),{delay:o=0,duration:E=x=>Math.sqrt(x)*120,easing:w=de}=a;return{delay:o,duration:G(E)?E(Math.sqrt(d*d+h*h)):E,easing:w,css:(x,f)=>{const b=f*d,U=f*h,r=x+f*e.width/t.width,s=x+f*e.height/t.height;return`transform: ${g} translate(${b}px, ${U}px) scale(${r}, ${s});`}}}const{Map:Ue,document:Y}=xe;function re(i,e,t){const a=i.slice();return a[3]=e[t],a[4]=e,a[5]=t,a}function ie(i,e){let t,a,p,g,v,l,d,h,o,E,w,x,f,b,U,r,s,u,A,j,L,H,N,D,J,O,F,q,K,I,Q,W=Te,C,X,te;function ae(...y){return e[1](e[3],e[4],e[5],...y)}function ne(){return e[2](e[3],e[4],e[5])}return{key:i,first:null,c(){t=_("div"),a=_("form"),p=_("input"),v=M(),l=_("input"),h=M(),o=_("button"),x=M(),f=_("form"),b=_("input"),r=M(),s=_("input"),A=M(),j=_("button"),L=M(),H=_("form"),N=_("input"),J=M(),O=_("button"),K=M(),this.h()},l(y){t=$(y,"DIV",{class:!0});var m=V(t);a=$(m,"FORM",{action:!0,method:!0});var B=V(a);p=$(B,"INPUT",{type:!0,name:!0,class:!0}),v=T(B),l=$(B,"INPUT",{type:!0,name:!0,class:!0}),h=T(B),o=$(B,"BUTTON",{class:!0,"aria-label":!0}),V(o).forEach(k),B.forEach(k),x=T(m),f=$(m,"FORM",{class:!0,action:!0,method:!0});var R=V(f);b=$(R,"INPUT",{type:!0,name:!0,class:!0}),r=T(R),s=$(R,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),A=T(R),j=$(R,"BUTTON",{class:!0,"aria-label":!0}),V(j).forEach(k),R.forEach(k),L=T(m),H=$(m,"FORM",{action:!0,method:!0});var S=V(H);N=$(S,"INPUT",{type:!0,name:!0,class:!0}),J=T(S),O=$(S,"BUTTON",{class:!0,"aria-label":!0}),V(O).forEach(k),S.forEach(k),K=T(m),m.forEach(k),this.h()},h(){n(p,"type","hidden"),n(p,"name","uid"),p.value=g=e[3].uid,n(p,"class","svelte-16nsat"),n(l,"type","hidden"),n(l,"name","done"),l.value=d=e[3].done?"":"true",n(l,"class","svelte-16nsat"),n(o,"class","toggle svelte-16nsat"),n(o,"aria-label",E="Mark todo as "+(e[3].done?"not done":"done")),n(a,"action","/todos?_method=PATCH"),n(a,"method","post"),n(b,"type","hidden"),n(b,"name","uid"),b.value=U=e[3].uid,n(b,"class","svelte-16nsat"),n(s,"aria-label","Edit todo"),n(s,"type","text"),n(s,"name","text"),s.value=u=e[3].text,n(s,"class","svelte-16nsat"),n(j,"class","save svelte-16nsat"),n(j,"aria-label","Save todo"),n(f,"class","text svelte-16nsat"),n(f,"action","/todos?_method=PATCH"),n(f,"method","post"),n(N,"type","hidden"),n(N,"name","uid"),N.value=D=e[3].uid,n(N,"class","svelte-16nsat"),n(O,"class","delete svelte-16nsat"),n(O,"aria-label","Delete todo"),O.disabled=F=e[3].pending_delete,n(H,"action","/todos?_method=DELETE"),n(H,"method","post"),n(t,"class","todo svelte-16nsat"),se(t,"done",e[3].done),this.first=t},m(y,m){ee(y,t,m),c(t,a),c(a,p),c(a,v),c(a,l),c(a,h),c(a,o),c(t,x),c(t,f),c(f,b),c(f,r),c(f,s),c(f,A),c(f,j),c(t,L),c(t,H),c(H,N),c(H,J),c(H,O),c(t,K),C=!0,X||(te=[Z(w=z.call(null,a,{pending:ae})),Z(z.call(null,f)),Z(q=z.call(null,H,{pending:ne}))],X=!0)},p(y,m){e=y,(!C||m&1&&g!==(g=e[3].uid))&&(p.value=g),(!C||m&1&&d!==(d=e[3].done?"":"true"))&&(l.value=d),(!C||m&1&&E!==(E="Mark todo as "+(e[3].done?"not done":"done")))&&n(o,"aria-label",E),w&&G(w.update)&&m&1&&w.update.call(null,{pending:ae}),(!C||m&1&&U!==(U=e[3].uid))&&(b.value=U),(!C||m&1&&u!==(u=e[3].text)&&s.value!==u)&&(s.value=u),(!C||m&1&&D!==(D=e[3].uid))&&(N.value=D),(!C||m&1&&F!==(F=e[3].pending_delete))&&(O.disabled=F),q&&G(q.update)&&m&1&&q.update.call(null,{pending:ne}),m&1&&se(t,"done",e[3].done)},r(){Q=t.getBoundingClientRect()},f(){he(t),W(),ve(t,Q)},a(){W(),W=fe(t,Q,Ve,{duration:200})},i(y){C||(y&&me(()=>{I||(I=oe(t,le,{start:.7},!0)),I.run(1)}),C=!0)},o(y){y&&(I||(I=oe(t,le,{start:.7},!1)),I.run(0)),C=!1},d(y){y&&k(t),y&&I&&I.end(),X=!1,ge(te)}}}function je(i){let e,t,a,p,g,v,l,d,h,o=[],E=new Ue,w,x,f,b=i[0];const U=r=>r[3].uid;for(let r=0;r<b.length;r+=1){let s=re(i,b,r),u=U(s);E.set(u,o[r]=ie(u,s))}return{c(){e=_("meta"),t=M(),a=_("div"),p=_("h1"),g=_e("Todos"),v=M(),l=_("form"),d=_("input"),h=M();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){const s=$e('[data-svelte="svelte-aw2gey"]',Y.head);e=$(s,"META",{name:!0,content:!0}),s.forEach(k),t=T(r),a=$(r,"DIV",{class:!0});var u=V(a);p=$(u,"H1",{});var A=V(p);g=be(A,"Todos"),A.forEach(k),v=T(u),l=$(u,"FORM",{class:!0,action:!0,method:!0});var j=V(l);d=$(j,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),j.forEach(k),h=T(u);for(let L=0;L<o.length;L+=1)o[L].l(u);u.forEach(k),this.h()},h(){Y.title="Todos",n(e,"name","description"),n(e,"content","A todo list app"),n(d,"name","text"),n(d,"aria-label","Add todo"),n(d,"placeholder","+ tap to add a todo"),n(d,"class","svelte-16nsat"),n(l,"class","new svelte-16nsat"),n(l,"action","/todos"),n(l,"method","post"),n(a,"class","todos svelte-16nsat")},m(r,s){c(Y.head,e),ee(r,t,s),ee(r,a,s),c(a,p),c(p,g),c(a,v),c(a,l),c(l,d),c(a,h);for(let u=0;u<o.length;u+=1)o[u].m(a,null);w=!0,x||(f=Z(z.call(null,l,{result:Ne})),x=!0)},p(r,[s]){if(s&1){b=r[0],Ce();for(let u=0;u<o.length;u+=1)o[u].r();o=ke(o,s,U,1,r,b,E,a,Me,ie,null,re);for(let u=0;u<o.length;u+=1)o[u].a();we()}},i(r){if(!w){for(let s=0;s<b.length;s+=1)ye(o[s]);w=!0}},o(r){for(let s=0;s<o.length;s+=1)Ee(o[s]);w=!1},d(r){k(e),r&&k(t),r&&k(a);for(let s=0;s<o.length;s+=1)o[s].d();x=!1,f()}}}const Ne=async({form:i})=>{i.reset()};function Oe(i,e,t){let{todos:a}=e;const p=(v,l,d,{data:h})=>{t(0,l[d].done=!!h.get("done"),a)},g=(v,l,d)=>t(0,l[d].pending_delete=!0,a);return i.$$set=v=>{"todos"in v&&t(0,a=v.todos)},[a,p,g]}class Pe extends ue{constructor(e){super(),ce(this,e,Oe,je,pe,{todos:0})}}export{Pe as default};
